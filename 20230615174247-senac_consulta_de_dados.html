<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>Senac: Consulta de dados</title>
  <style>
    html {
      color: #1a1a1a;
      background-color: #fdfdfd;
    }
    body {
      margin: 0 auto;
      max-width: 36em;
      padding-left: 50px;
      padding-right: 50px;
      padding-top: 50px;
      padding-bottom: 50px;
      hyphens: auto;
      overflow-wrap: break-word;
      text-rendering: optimizeLegibility;
      font-kerning: normal;
    }
    @media (max-width: 600px) {
      body {
        font-size: 0.9em;
        padding: 12px;
      }
      h1 {
        font-size: 1.8em;
      }
    }
    @media print {
      html {
        background-color: white;
      }
      body {
        background-color: transparent;
        color: black;
        font-size: 12pt;
      }
      p, h2, h3 {
        orphans: 3;
        widows: 3;
      }
      h2, h3, h4 {
        page-break-after: avoid;
      }
    }
    p {
      margin: 1em 0;
    }
    a {
      color: #1a1a1a;
    }
    a:visited {
      color: #1a1a1a;
    }
    img {
      max-width: 100%;
    }
    h1, h2, h3, h4, h5, h6 {
      margin-top: 1.4em;
    }
    h5, h6 {
      font-size: 1em;
      font-style: italic;
    }
    h6 {
      font-weight: normal;
    }
    ol, ul {
      padding-left: 1.7em;
      margin-top: 1em;
    }
    li > ol, li > ul {
      margin-top: 0;
    }
    blockquote {
      margin: 1em 0 1em 1.7em;
      padding-left: 1em;
      border-left: 2px solid #e6e6e6;
      color: #606060;
    }
    code {
      font-family: Menlo, Monaco, Consolas, 'Lucida Console', monospace;
      font-size: 85%;
      margin: 0;
      hyphens: manual;
    }
    pre {
      margin: 1em 0;
      overflow: auto;
    }
    pre code {
      padding: 0;
      overflow: visible;
      overflow-wrap: normal;
    }
    .sourceCode {
     background-color: transparent;
     overflow: visible;
    }
    hr {
      background-color: #1a1a1a;
      border: none;
      height: 1px;
      margin: 1em 0;
    }
    table {
      margin: 1em 0;
      border-collapse: collapse;
      width: 100%;
      overflow-x: auto;
      display: block;
      font-variant-numeric: lining-nums tabular-nums;
    }
    table caption {
      margin-bottom: 0.75em;
    }
    tbody {
      margin-top: 0.5em;
      border-top: 1px solid #1a1a1a;
      border-bottom: 1px solid #1a1a1a;
    }
    th {
      border-top: 1px solid #1a1a1a;
      padding: 0.25em 0.5em 0.25em 0.5em;
    }
    td {
      padding: 0.125em 0.5em 0.25em 0.5em;
    }
    header {
      margin-bottom: 4em;
      text-align: center;
    }
    #TOC li {
      list-style: none;
    }
    #TOC ul {
      padding-left: 1.3em;
    }
    #TOC > ul {
      padding-left: 0;
    }
    #TOC a:not(:hover) {
      text-decoration: none;
    }
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      width: 0.8em;
      margin: 0 0.8em 0.2em -1.6em;
      vertical-align: middle;
    }
    .display.math{display: block; text-align: center; margin: 0.5rem auto;}
    /* CSS for syntax highlighting */
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
        color: #aaaaaa;
      }
    pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
    div.sourceCode
      {   }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span.al { color: #ff0000; font-weight: bold; } /* Alert */
    code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
    code span.at { color: #7d9029; } /* Attribute */
    code span.bn { color: #40a070; } /* BaseN */
    code span.bu { color: #008000; } /* BuiltIn */
    code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
    code span.ch { color: #4070a0; } /* Char */
    code span.cn { color: #880000; } /* Constant */
    code span.co { color: #60a0b0; font-style: italic; } /* Comment */
    code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
    code span.do { color: #ba2121; font-style: italic; } /* Documentation */
    code span.dt { color: #902000; } /* DataType */
    code span.dv { color: #40a070; } /* DecVal */
    code span.er { color: #ff0000; font-weight: bold; } /* Error */
    code span.ex { } /* Extension */
    code span.fl { color: #40a070; } /* Float */
    code span.fu { color: #06287e; } /* Function */
    code span.im { color: #008000; font-weight: bold; } /* Import */
    code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
    code span.kw { color: #007020; font-weight: bold; } /* Keyword */
    code span.op { color: #666666; } /* Operator */
    code span.ot { color: #007020; } /* Other */
    code span.pp { color: #bc7a00; } /* Preprocessor */
    code span.sc { color: #4070a0; } /* SpecialChar */
    code span.ss { color: #bb6688; } /* SpecialString */
    code span.st { color: #4070a0; } /* String */
    code span.va { color: #19177c; } /* Variable */
    code span.vs { color: #4070a0; } /* VerbatimString */
    code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
  </style>
  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->
</head>
<body>
<header id="title-block-header">
<h1 class="title">Senac: Consulta de dados</h1>
</header>
<p><strong>Anterior:</strong> <a
href="20230615174222-senac_manipulacao_de_dados.html">Senac: Manipulação
de dados</a> <strong>Proxima</strong>: <a
href="20230615174326-senac_consulta_com_multiplas_tabelas.html">Senac:
Consulta com múltiplas tabelas</a> <strong>Raiz:</strong> <a
href="20230615173208-auxiliar_na_modelagem_e_manipulacao_de_banco_de_dados.html">Auxiliar
na modelagem e manipulação de banco de dados</a></p>
<h1 id="info">Info</h1>
<ul>
<li>Aula: Semana 5 - Texto 1</li>
<li>Data: [2023-06-28]</li>
<li>Recursos (Textos, links, etc): <a
href="https://senac.blackboard.com/bbcswebdav/pid-9676773-dt-content-rid-243719226_1/institution/Senac%20RS/_cursos_tecnicos/TDS/UC03/conteudos/HTML/07_consulta_dados/index.html?page=1">Texto</a></li>
</ul>
<h1
id="consultas-de-dados-seleção-filtragem-operadores-lógicos-operadores-aritméticos-consultas-simples-e-compostas-ordenação-de-resultados-cálculos-em-sql-funções-internas-básicas-count-sum-avg-min-max">Consultas
de dados: seleção, filtragem, operadores lógicos, operadores
aritméticos, consultas simples e compostas, ordenação de resultados,
cálculos em SQL, funções internas básicas (COUNT, SUM, AVG, MIN,
MAX)</h1>
<h2 id="preparando-o-ambiente">Preparando o ambiente</h2>
<ul>
<li><p>Para esse texto será criada uma nova database</p>
<div class="sourceCode" id="cb1" data-engine="mysql"
data-dbhost="127.0.0.1" data-dbport="3306" data-dbuser="vini"
data-dbpassword="macro187"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="kw">CREATE</span> <span class="kw">DATABASE</span> super;        </span></code></pre></div>
<ul>
<li><p>Populando a database:</p>
<div class="sourceCode" id="cb2" data-engine="mysql"
data-dbhost="127.0.0.1" data-dbport="3306" data-dbuser="vini"
data-dbpassword="macro187" data-database="super"><pre
class="sourceCode sql"><code class="sourceCode sql"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="kw">CREATE</span> <span class="kw">TABLE</span> Produtos(</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>  idProduto <span class="dt">INT</span> <span class="kw">NOT</span> <span class="kw">NULL</span> AUTO_INCREMENT,</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>  nomeProduto <span class="dt">VARCHAR</span>(<span class="dv">200</span>),</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>  categoriaProduto <span class="dt">VARCHAR</span>(<span class="dv">200</span>),</span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>  valorVendaProduto <span class="dt">DOUBLE</span>(<span class="dv">9</span>,<span class="dv">2</span>),</span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>  quantidadeProduto <span class="dt">INT</span>,</span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a>  <span class="kw">PRIMARY</span> <span class="kw">KEY</span> (idProduto)</span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a> );</span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a> <span class="kw">INSERT</span> <span class="kw">into</span> Produtos (nomeProduto,categoriaProduto,valorVendaProduto,quantidadeProduto) <span class="kw">values</span>        (<span class="st">&#39;Refrigerante&#39;</span>,<span class="st">&#39;Bebidas&#39;</span>,<span class="st">&#39;5.50&#39;</span>,<span class="dv">300</span>), (<span class="st">&#39;Arroz 5kg&#39;</span>,<span class="st">&#39;Mercearia&#39;</span>,<span class="st">&#39;8.50&#39;</span>,<span class="dv">100</span>), (<span class="st">&#39;Feijão&#39;</span>,<span class="st">&#39;Mercearia&#39;</span>,<span class="st">&#39;6.50&#39;</span>,<span class="dv">800</span>), (<span class="st">&#39;Detergente&#39;</span>,<span class="st">&#39;Limpeza&#39;</span>,<span class="st">&#39;2.10&#39;</span>,<span class="dv">100</span>), (<span class="st">&#39;Leite&#39;</span>,<span class="st">&#39;Laticínios&#39;</span>,<span class="st">&#39;2.70&#39;</span>,<span class="dv">600</span>), (<span class="st">&#39;Bolacha recheada&#39;</span>,<span class="kw">NULL</span>,<span class="st">&#39;1.50&#39;</span>,<span class="dv">200</span>), (<span class="st">&#39;Leite condensado&#39;</span>,<span class="st">&#39;Mercearia&#39;</span>,<span class="st">&#39;4.50&#39;</span>,<span class="dv">500</span>); </span></code></pre></div></li>
<li><p>Verificando:</p>
<div class="sourceCode" id="cb3" data-engine="mysql"
data-dbhost="127.0.0.1" data-dbport="3306" data-dbuser="vini"
data-dbpassword="macro187" data-database="super"><pre
class="sourceCode sql"><code class="sourceCode sql"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> <span class="op">*</span> <span class="kw">FROM</span> Produtos        </span></code></pre></div>
<table>
<thead>
<tr class="header">
<th>idProduto</th>
<th>nomeProduto</th>
<th>categoriaProduto</th>
<th>valorVendaProduto</th>
<th>quantidadeProduto</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>Refrigerante</td>
<td>Bebidas</td>
<td>5.50</td>
<td>300</td>
</tr>
<tr class="even">
<td>2</td>
<td>Arroz 5kg</td>
<td>Mercearia</td>
<td>8.50</td>
<td>100</td>
</tr>
<tr class="odd">
<td>3</td>
<td>Feijão</td>
<td>Mercearia</td>
<td>6.50</td>
<td>800</td>
</tr>
<tr class="even">
<td>4</td>
<td>Detergente</td>
<td>Limpeza</td>
<td>2.10</td>
<td>100</td>
</tr>
<tr class="odd">
<td>5</td>
<td>Leite</td>
<td>Laticínios</td>
<td>2.70</td>
<td>600</td>
</tr>
<tr class="even">
<td>6</td>
<td>Bolacha recheada</td>
<td>NULL</td>
<td>1.50</td>
<td>200</td>
</tr>
<tr class="odd">
<td>7</td>
<td>Leite condensado</td>
<td>Mercearia</td>
<td>4.50</td>
<td>500</td>
</tr>
</tbody>
</table></li>
</ul></li>
</ul>
<h2 id="seleção-de-dados-com-select">Seleção de dados com SELECT</h2>
<ul>
<li><p>O comando SELECT em SQL permite recuperar dados de uma ou mais
tabelas do banco de dados de acordo com clausulas (FROM e
WHERE)</p></li>
<li><p>A sintaxe básica do comando se da dessa forma:</p>
<div class="sourceCode" id="cb4"><pre
class="sourceCode sql"><code class="sourceCode sql"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> coluna1, coluna2 <span class="kw">FROM</span> tabela1, tabela2 <span class="kw">WHERE</span> condição;</span></code></pre></div>
<ul>
<li>Destrinchando:
<ul>
<li><strong>SELECT</strong>: inica o comando e decide quais colunas
devem ser recuperadas, utilize o * para "todas as colunas"</li>
<li><strong>FROM</strong>: especifica uma ou mais tabelas a serem
consultadas</li>
<li><strong>WHERE</strong>: indica uma ou mais condições para a
consulta. Exemplo: WHERE id = 1 retornaria todas as entradas de ID =
1</li>
</ul></li>
</ul></li>
</ul>
<h3 id="filtrando-dados-através-do-where">Filtrando dados através do
WHERE</h3>
<ul>
<li><p>O WHERE aceita diversas operações como parametros, veja a
seguir:</p>
<table>
<thead>
<tr class="header">
<th>Operador</th>
<th>Operação</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>=</td>
<td>Teste de igualdade</td>
</tr>
<tr class="even">
<td>&lt;&gt; ou !=</td>
<td>Teste de desigualdade</td>
</tr>
<tr class="odd">
<td>&lt;</td>
<td>Menor que</td>
</tr>
<tr class="even">
<td>&gt;</td>
<td>Maior que</td>
</tr>
<tr class="odd">
<td>&lt;=</td>
<td>Menor ou igual a</td>
</tr>
<tr class="even">
<td>&gt;=</td>
<td>Maior ou igual a</td>
</tr>
<tr class="odd">
<td>BETWEEN</td>
<td>Testa se um valor se encontra em um intervalo</td>
</tr>
<tr class="even">
<td>IN</td>
<td>Testa se o valor de uma linha está contido em um conjunto de valores
especificados</td>
</tr>
<tr class="odd">
<td>EXISTS</td>
<td>Testa se existem linhas com valores especificados</td>
</tr>
<tr class="even">
<td>LIKE</td>
<td>Testa se um valor corresponde a uma String especifica</td>
</tr>
<tr class="odd">
<td>IS NULL</td>
<td>Checa se o valor é NULL</td>
</tr>
<tr class="even">
<td>IS NOT NULL</td>
<td>Chega se um valor não é NULL</td>
</tr>
</tbody>
</table></li>
</ul>
<h2 id="operadores-lógicos-and-or-e-not">Operadores lógicos AND, OR e
NOT</h2>
<ul>
<li>Ainda sobre filtros, é possível aplicar operadores lógicos booleanos
às condições para pesquisa</li>
<li>Exemplos:
<ul>
<li><p>AND:</p>
<div class="sourceCode" id="cb5" data-engine="mysql"
data-dbhost="127.0.0.1" data-dbport="3306" data-dbuser="vini"
data-dbpassword="macro187" data-database="super"><pre
class="sourceCode sql"><code class="sourceCode sql"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> <span class="op">*</span> <span class="kw">FROM</span> Produtos <span class="kw">WHERE</span> valorVendaProduto <span class="kw">AND</span> quantidadeProduto <span class="op">=</span> <span class="dv">200</span></span></code></pre></div></li>
</ul></li>
</ul>
<table>
<thead>
<tr class="header">
<th>idProduto</th>
<th>nomeProduto</th>
<th>categoriaProduto</th>
<th>valorVendaProduto</th>
<th>quantidadeProduto</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>6</td>
<td>Bolacha recheada</td>
<td>NULL</td>
<td>1.50</td>
<td>200</td>
</tr>
</tbody>
</table>
<ul>
<li>OR:</li>
</ul>
<div class="sourceCode" id="cb6" data-engine="mysql"
data-dbhost="127.0.0.1" data-dbport="3306" data-dbuser="vini"
data-dbpassword="macro187" data-database="super"><pre
class="sourceCode sql"><code class="sourceCode sql"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> <span class="op">*</span> <span class="kw">FROM</span> Produtos <span class="kw">WHERE</span> categoriaProduto <span class="op">=</span> <span class="st">&#39;Limpeza&#39;</span> <span class="kw">OR</span> valorVendaProduto <span class="op">=</span> <span class="fl">5.50</span>        </span></code></pre></div>
<table>
<thead>
<tr class="header">
<th>idProduto</th>
<th>nomeProduto</th>
<th>categoriaProduto</th>
<th>valorVendaProduto</th>
<th>quantidadeProduto</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>Refrigerante</td>
<td>Bebidas</td>
<td>5.50</td>
<td>300</td>
</tr>
<tr class="even">
<td>4</td>
<td>Detergente</td>
<td>Limpeza</td>
<td>2.10</td>
<td>100</td>
</tr>
</tbody>
</table>
<ul>
<li>AND e OR (vice-versa)</li>
</ul>
<div class="sourceCode" id="cb7" data-engine="mysql"
data-dbhost="127.0.0.1" data-dbport="3306" data-dbuser="vini"
data-dbpassword="macro187" data-database="super"><pre
class="sourceCode sql"><code class="sourceCode sql"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> <span class="op">*</span> <span class="kw">FROM</span> Produtos <span class="kw">WHERE</span> (categoriaProduto <span class="op">=</span><span class="st">&#39;Limpeza&#39;</span> <span class="kw">or</span> categoriaProduto<span class="op">=</span><span class="st">&#39;Mercearia&#39;</span>) <span class="kw">and</span> valorVendaProduto <span class="op">=</span> <span class="fl">6.50</span> </span></code></pre></div>
<ul>
<li>Nesse caso note que há a possiblidade de usar parenteses para
priorizar a execução de uma condição
<ul>
<li>O SQL prioriza a execução do operador AND sobre o operador OR, sendo
assim se queremos concatenar um OR com um AND e garantir que a condição
proposta pelo OR seja executada devemos envolve-la em parenteses</li>
</ul></li>
<li>NOT:</li>
</ul>
<div class="sourceCode" id="cb8" data-engine="mysql"
data-dbhost="127.0.0.1" data-dbport="3306" data-dbuser="vini"
data-dbpassword="macro187" data-database="super"><pre
class="sourceCode sql"><code class="sourceCode sql"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> <span class="op">*</span> <span class="kw">FROM</span> Produtos <span class="kw">WHERE</span> <span class="kw">NOT</span> categoriaProduto <span class="op">=</span><span class="st">&#39;Mercearia&#39;</span> </span></code></pre></div>
<h2 id="operadores-de-comparação">Operadores de comparação</h2>
<ul>
<li>Autoexplicativos, utilizados no WHERE</li>
</ul>
<h2 id="operador-between">Operador Between</h2>
<ul>
<li><p>Verifica se um valor está entre um range de valores</p></li>
<li><p>Sintaxe básica</p>
<div class="sourceCode" id="cb9" data-engine="mysql"
data-dbhost="127.0.0.1" data-dbport="3306" data-dbuser="vini"
data-dbpassword="macro187" data-database="super"><pre
class="sourceCode sql"><code class="sourceCode sql"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> <span class="op">*</span> <span class="kw">FROM</span> tabela <span class="kw">WHERE</span> coluna1 <span class="kw">BETWEEN</span> valor1 <span class="kw">AND</span> valor2</span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a></span></code></pre></div></li>
<li><p>Equivalente a:</p>
<div class="sourceCode" id="cb10" data-engine="mysql"
data-dbhost="127.0.0.1" data-dbport="3306" data-dbuser="vini"
data-dbpassword="macro187" data-database="senacEstudo"><pre
class="sourceCode sql"><code class="sourceCode sql"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> <span class="op">*</span> <span class="kw">FROM</span> tabela <span class="kw">WHERE</span> coluna1 <span class="op">&gt;=</span> valor1 <span class="kw">AND</span> coluna1 <span class="op">&lt;=</span> valor2         </span></code></pre></div></li>
<li><p>Exemplificando:</p>
<div class="sourceCode" id="cb11" data-engine="mysql"
data-dbhost="127.0.0.1" data-dbport="3306" data-dbuser="vini"
data-dbpassword="macro187" data-database="super"><pre
class="sourceCode sql"><code class="sourceCode sql"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> <span class="op">*</span> <span class="kw">FROM</span> Produtos <span class="kw">WHERE</span> valorVendaProduto <span class="kw">BETWEEN</span> <span class="dv">5</span> <span class="kw">AND</span> <span class="dv">10</span> </span></code></pre></div>
<table>
<thead>
<tr class="header">
<th>idProduto</th>
<th>nomeProduto</th>
<th>categoriaProduto</th>
<th>valorVendaProduto</th>
<th>quantidadeProduto</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>Refrigerante</td>
<td>Bebidas</td>
<td>5.50</td>
<td>300</td>
</tr>
<tr class="even">
<td>2</td>
<td>Arroz 5kg</td>
<td>Mercearia</td>
<td>8.50</td>
<td>100</td>
</tr>
<tr class="odd">
<td>3</td>
<td>Feijão</td>
<td>Mercearia</td>
<td>6.50</td>
<td>800</td>
</tr>
</tbody>
</table></li>
</ul>
<h2 id="operadores-de-existência-in-not-in">Operadores de existência IN,
NOT IN</h2>
<ul>
<li>Filtra o valor de um campo especifico de uma tabela considerando uma
lista de possibiliades.</li>
</ul>
<h3 id="operador-in">Operador IN</h3>
<ul>
<li>Verifica se os valores estão incluídos na lista</li>
<li>Sintaxe básica:</li>
</ul>
<div class="sourceCode" id="cb12" data-engine="mysql"
data-dbhost="127.0.0.1" data-dbport="3306" data-dbuser="vini"
data-dbpassword="macro187" data-database="senacEstudo"><pre
class="sourceCode sql"><code class="sourceCode sql"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> <span class="op">*</span> <span class="kw">FROM</span> tabela <span class="kw">WHERE</span> campo <span class="kw">IN</span> (valor1,valor2,valor3)        </span></code></pre></div>
<ul>
<li><p>Exemplo:</p>
<div class="sourceCode" id="cb13" data-engine="mysql"
data-dbhost="127.0.0.1" data-dbport="3306" data-dbuser="vini"
data-dbpassword="macro187" data-database="super"><pre
class="sourceCode sql"><code class="sourceCode sql"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> <span class="op">*</span> <span class="kw">FROM</span> Produtos <span class="kw">WHERE</span> categoriaProduto <span class="kw">IN</span> (<span class="st">&#39;Limpeza&#39;</span>,<span class="st">&#39;Bebidas&#39;</span>,<span class="st">&#39;Laticínios&#39;</span>) </span></code></pre></div></li>
</ul>
<table>
<thead>
<tr class="header">
<th>idProduto</th>
<th>nomeProduto</th>
<th>categoriaProduto</th>
<th>valorVendaProduto</th>
<th>quantidadeProduto</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>Refrigerante</td>
<td>Bebidas</td>
<td>5.50</td>
<td>300</td>
</tr>
<tr class="even">
<td>4</td>
<td>Detergente</td>
<td>Limpeza</td>
<td>2.10</td>
<td>100</td>
</tr>
<tr class="odd">
<td>5</td>
<td>Leite</td>
<td>Laticínios</td>
<td>2.70</td>
<td>600</td>
</tr>
</tbody>
</table>
<h3 id="operador-not-in">Operador NOT IN</h3>
<ul>
<li><p>Faz a mesma coisa que o IN porém verifica se os valores não
existem na lista</p>
<div class="sourceCode" id="cb14" data-engine="mysql"
data-dbhost="127.0.0.1" data-dbport="3306" data-dbuser="vini"
data-dbpassword="macro187" data-database="super"><pre
class="sourceCode sql"><code class="sourceCode sql"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> <span class="op">*</span> <span class="kw">FROM</span> Produtos <span class="kw">WHERE</span> categoriaProduto <span class="kw">NOT</span> <span class="kw">IN</span> (<span class="st">&#39;Limpeza&#39;</span>,<span class="st">&#39;Bebidas&#39;</span>,<span class="st">&#39;Laticínios&#39;</span>) </span></code></pre></div></li>
</ul>
<table>
<thead>
<tr class="header">
<th>idProduto</th>
<th>nomeProduto</th>
<th>categoriaProduto</th>
<th>valorVendaProduto</th>
<th>quantidadeProduto</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>2</td>
<td>Arroz 5kg</td>
<td>Mercearia</td>
<td>8.50</td>
<td>100</td>
</tr>
<tr class="even">
<td>3</td>
<td>Feijão</td>
<td>Mercearia</td>
<td>6.50</td>
<td>800</td>
</tr>
<tr class="odd">
<td>7</td>
<td>Leite condensado</td>
<td>Mercearia</td>
<td>4.50</td>
<td>500</td>
</tr>
</tbody>
</table>
<h2 id="operador-like">Operador LIKE</h2>
<ul>
<li>O operador <strong>LIKE</strong> é utilizado para buscar um texto
que aparece em outro texto</li>
<li>Para efetuar a busca com Like Utilize os suboperadores % e _ para
indicar como o LIKE deve se comportar:
<ul>
<li><strong>'%termo%'</strong>: Serão retornados registros que contêm em
qualquer parte do campo buscado o termo informado.
<ul>
<li>Exemplo: o nome de um produto é Leite Condensado e o termo
pesquisado é '%eite%'. como a substrig eite faz parte da palavra Leite,
o produto Leite Condensado é retornado.</li>
</ul></li>
<li>'<strong>%termo'</strong>: Retornará os registros em que o valor do
campo filtrado termina com o termo informado. O operador % serve para
indicar que o mesmo que existam outros termos no inicio do campo, se ele
terminar com o valor do termo buscado ele será retornado.
<ul>
<li>Exemplo: Se buscarmos por '%Condensado' o produto "Leite Condensado"
será retornado, mas se pesquisarmos por '%Leite' nada é retornado</li>
</ul></li>
<li><strong>'termo%'</strong>: Serão retornados os registros cujo valor
do campo começa com o termo informado
<ul>
<li>Exemplo: Se procurarmos por 'Leite%' o produto Leite Condensado é
retornado, porém se procurarmos por 'Condensado%' nada é retornado</li>
</ul></li>
<li><strong>'<sub>termo</sub>%'</strong>: O indicador _ indica a
quantidade de casas/caracteres antes ou depois do termo buscado.
<ul>
<li>Exemplo: se o termo buscado for '<sub>eite</sub>%' serão retornados
registros que contem apenas um caractere antes do termo buscado. Se um
registro for Leite Condensado ele será retornado, mas se o registro for
Enfeite, nada será retornado.</li>
</ul></li>
<li><strong>'t___<sub>o</sub>%'</strong>: Nesse caso especificamos o
numero de casas entre duas letras. Serão retronados valores que possuem
a quantidade de caracteres entre os caracteres buscados.
<ul>
<li>Exemplo: Se o termo for '%s__<sub>o</sub>' e um registro for Leite
Condensado, como em "Condensado" o caracter S se encontra 3 casas antes
do caractere O o registro é retornado. No entando se o registro for
"Ansioso", como o S está distante 2 casas ou 1 casa de um O nada é
retornado</li>
</ul></li>
</ul></li>
</ul>
<h2 id="operador-is-null-e-is-not-null">Operador IS NULL e IS NOT
NULL</h2>
<ul>
<li><p>Verifica se um campo é nulo.</p></li>
<li><p>Sintaxe básica:</p>
<div class="sourceCode" id="cb15"><pre
class="sourceCode sql"><code class="sourceCode sql"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> <span class="op">*</span> <span class="kw">FROM</span> tabela <span class="kw">WHERE</span> coluna <span class="kw">IS</span> <span class="kw">NULL</span>; <span class="co">-- retorna todos os NULL</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> <span class="op">*</span> <span class="kw">FROM</span> tabela <span class="kw">WHERE</span> coluna <span class="kw">IS</span> <span class="kw">NOT</span> <span class="kw">NULL</span>; <span class="co">-- retorna todos os valores que não são NULL</span></span></code></pre></div></li>
<li><p>Exemplo 1:</p>
<div class="sourceCode" id="cb16" data-engine="mysql"
data-dbhost="127.0.0.1" data-dbport="3306" data-dbuser="vini"
data-dbpassword="macro187" data-database="super"><pre
class="sourceCode sql"><code class="sourceCode sql"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> <span class="op">*</span> <span class="kw">FROM</span> Produtos <span class="kw">WHERE</span> categoriaProduto <span class="kw">IS</span> <span class="kw">NULL</span></span></code></pre></div>
<table>
<thead>
<tr class="header">
<th>idProduto</th>
<th>nomeProduto</th>
<th>categoriaProduto</th>
<th>valorVendaProduto</th>
<th>quantidadeProduto</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>6</td>
<td>Bolacha recheada</td>
<td>NULL</td>
<td>1.50</td>
<td>200</td>
</tr>
</tbody>
</table></li>
<li><p>Exemplo 2:</p>
<div class="sourceCode" id="cb17" data-engine="mysql"
data-dbhost="127.0.0.1" data-dbport="3306" data-dbuser="vini"
data-dbpassword="macro187" data-database="super"><pre
class="sourceCode sql"><code class="sourceCode sql"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> <span class="op">*</span> <span class="kw">FROM</span> Produtos <span class="kw">WHERE</span> categoriaProduto <span class="kw">IS</span> <span class="kw">NOT</span> <span class="kw">NULL</span></span></code></pre></div>
<table>
<thead>
<tr class="header">
<th>idProduto</th>
<th>nomeProduto</th>
<th>categoriaProduto</th>
<th>valorVendaProduto</th>
<th>quantidadeProduto</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>Refrigerante</td>
<td>Bebidas</td>
<td>5.50</td>
<td>300</td>
</tr>
<tr class="even">
<td>2</td>
<td>Arroz 5kg</td>
<td>Mercearia</td>
<td>8.50</td>
<td>100</td>
</tr>
<tr class="odd">
<td>3</td>
<td>Feijão</td>
<td>Mercearia</td>
<td>6.50</td>
<td>800</td>
</tr>
<tr class="even">
<td>4</td>
<td>Detergente</td>
<td>Limpeza</td>
<td>2.10</td>
<td>100</td>
</tr>
<tr class="odd">
<td>5</td>
<td>Leite</td>
<td>Laticínios</td>
<td>2.70</td>
<td>600</td>
</tr>
<tr class="even">
<td>7</td>
<td>Leite condensado</td>
<td>Mercearia</td>
<td>4.50</td>
<td>500</td>
</tr>
</tbody>
</table></li>
<li><p>É importante ressaçtar que operadores de igualdade e diferença
ignoram valores <code>NULL</code>. Sendo assim, muitas vezes é
necessário utilizar o operador OR para completar a consulta. Veja a
diferença:</p>
<div class="sourceCode" id="cb18" data-engine="mysql"
data-dbhost="127.0.0.1" data-dbport="3306" data-dbuser="vini"
data-dbpassword="macro187" data-database="super"><pre
class="sourceCode sql"><code class="sourceCode sql"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> nomeProduto, categoriaProduto, valorVendaProduto <span class="kw">FROM</span> Produtos <span class="kw">WHERE</span> categoriaProduto <span class="op">&lt;&gt;</span> <span class="st">&#39;Mercearia&#39;</span>      </span></code></pre></div>
<table>
<thead>
<tr class="header">
<th>nomeProduto</th>
<th>categoriaProduto</th>
<th>valorVendaProduto</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Refrigerante</td>
<td>Bebidas</td>
<td>5.50</td>
</tr>
<tr class="even">
<td>Detergente</td>
<td>Limpeza</td>
<td>2.10</td>
</tr>
<tr class="odd">
<td>Leite</td>
<td>Laticínios</td>
<td>2.70</td>
</tr>
</tbody>
</table>
<ul>
<li><p>Perceba que apesar de o produto "Bolacha Recheada" não possuir a
categoria "Marcearia" ele foi ignorado, pois o registro tem valor
<code>NULL</code></p></li>
<li><p>Para complementar é necessário o operador
<strong>OR</strong>:</p>
<div class="sourceCode" id="cb19" data-engine="mysql"
data-dbhost="127.0.0.1" data-dbport="3306" data-dbuser="vini"
data-dbpassword="macro187" data-database="super"><pre
class="sourceCode sql"><code class="sourceCode sql"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> nomeProduto, categoriaProduto, valorVendaProduto <span class="kw">FROM</span> Produtos <span class="kw">WHERE</span> categoriaProduto <span class="op">&lt;&gt;</span> <span class="st">&#39;Mercearia&#39;</span> <span class="kw">OR</span> categoriaProduto <span class="kw">IS</span> <span class="kw">NULL</span> </span></code></pre></div>
<table>
<thead>
<tr class="header">
<th>nomeProduto</th>
<th>categoriaProduto</th>
<th>valorVendaProduto</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Refrigerante</td>
<td>Bebidas</td>
<td>5.50</td>
</tr>
<tr class="even">
<td>Detergente</td>
<td>Limpeza</td>
<td>2.10</td>
</tr>
<tr class="odd">
<td>Leite</td>
<td>Laticínios</td>
<td>2.70</td>
</tr>
<tr class="even">
<td>Bolacha recheada</td>
<td>NULL</td>
<td>1.50</td>
</tr>
</tbody>
</table></li>
</ul></li>
</ul>
<h2 id="alias">Alias</h2>
<ul>
<li>Itendifica uma tabela ou um campo através de outo nome utilizando o
operador <strong>AS</strong></li>
</ul>
<div class="sourceCode" id="cb20" data-engine="mysql"
data-dbhost="127.0.0.1" data-dbport="3306" data-dbuser="vini"
data-dbpassword="macro187" data-database="super"><pre
class="sourceCode sql"><code class="sourceCode sql"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> nomeProduto <span class="kw">AS</span> nome, valorVendaProduto <span class="kw">AS</span> valor <span class="kw">FROM</span> Produtos      </span></code></pre></div>
<table>
<thead>
<tr class="header">
<th>nome</th>
<th>valor</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Refrigerante</td>
<td>5.50</td>
</tr>
<tr class="even">
<td>Arroz 5kg</td>
<td>8.50</td>
</tr>
<tr class="odd">
<td>Feijão</td>
<td>6.50</td>
</tr>
<tr class="even">
<td>Detergente</td>
<td>2.10</td>
</tr>
<tr class="odd">
<td>Leite</td>
<td>2.70</td>
</tr>
<tr class="even">
<td>Bolacha recheada</td>
<td>1.50</td>
</tr>
<tr class="odd">
<td>Leite condensado</td>
<td>4.50</td>
</tr>
</tbody>
</table>
<ul>
<li><p>Aliases em tabelas</p>
<div class="sourceCode" id="cb21" data-engine="mysql"
data-dbhost="127.0.0.1" data-dbport="3306" data-dbuser="vini"
data-dbpassword="macro187" data-database="super"><pre
class="sourceCode sql"><code class="sourceCode sql"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> P.nomeProduto <span class="kw">AS</span> nome <span class="kw">FROM</span> Produtos <span class="kw">AS</span> P        </span></code></pre></div>
<table>
<thead>
<tr class="header">
<th>nome</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Refrigerante</td>
</tr>
<tr class="even">
<td>Arroz 5kg</td>
</tr>
<tr class="odd">
<td>Feijão</td>
</tr>
<tr class="even">
<td>Detergente</td>
</tr>
<tr class="odd">
<td>Leite</td>
</tr>
<tr class="even">
<td>Bolacha recheada</td>
</tr>
<tr class="odd">
<td>Leite condensado</td>
</tr>
</tbody>
</table></li>
</ul>
<h2 id="operadores-aritiméticos">Operadores aritiméticos</h2>
<ul>
<li>O SQL permite realizar operações matemáticas durante as consultas,
envolvendo um ou mais colunas de uma tabela.</li>
</ul>
<h3 id="operando">Operando</h3>
<div class="sourceCode" id="cb22"><pre
class="sourceCode sql"><code class="sourceCode sql"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> (coluna1<span class="op">+</span>coluna2) <span class="kw">AS</span> coluna_soma <span class="kw">FROM</span> tabela</span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> (coluna1<span class="op">-</span>coluna2) <span class="kw">AS</span> coluna_subtração <span class="kw">FROM</span> tabela</span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> (coluna1<span class="op">*</span>coluna2) <span class="kw">AS</span> coluna_multiplicação <span class="kw">FROM</span> tabela</span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> (coluna1<span class="op">/</span>coluna2) <span class="kw">AS</span> coluna_divisão <span class="kw">FROM</span> tabela</span></code></pre></div>
<ul>
<li>Destrinchando:
<ul>
<li>SELECT (coluna1*coluna2): Multiplica os valores da coluna 1 com a
coluna 2</li>
<li>AS coluna<sub>resultado</sub>: Para retornar o resultado de cada
linha em é necessário criar uma coluna nova para a resposta (essa coluna
não será armazenada e serve apenas como resultado da query)</li>
<li>FROM: seleciona a tabela</li>
</ul></li>
<li>Exemplos:
<ul>
<li><p>Adição</p>
<div class="sourceCode" id="cb23" data-engine="mysql"
data-dbhost="127.0.0.1" data-dbport="3306" data-dbuser="vini"
data-dbpassword="macro187" data-database="super"><pre
class="sourceCode sql"><code class="sourceCode sql"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> (valorVendaProduto<span class="op">+</span>quantidadeProduto) <span class="kw">AS</span> Valor_Soma <span class="kw">FROM</span> Produtos          </span></code></pre></div></li>
</ul>
<table>
<thead>
<tr class="header">
<th>Valor<sub>Soma</sub></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>305.50</td>
</tr>
<tr class="even">
<td>108.50</td>
</tr>
<tr class="odd">
<td>806.50</td>
</tr>
<tr class="even">
<td>102.10</td>
</tr>
<tr class="odd">
<td>602.70</td>
</tr>
<tr class="even">
<td>201.50</td>
</tr>
<tr class="odd">
<td>504.50</td>
</tr>
</tbody>
</table>
<ul>
<li><p>Subtração</p>
<div class="sourceCode" id="cb24" data-engine="mysql"
data-dbhost="127.0.0.1" data-dbport="3306" data-dbuser="vini"
data-dbpassword="macro187" data-database="super"><pre
class="sourceCode sql"><code class="sourceCode sql"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> (valorVendaProduto<span class="op">-</span>quantidadeProduto) <span class="kw">AS</span> Valor_Sub <span class="kw">FROM</span> Produtos           </span></code></pre></div></li>
</ul>
<table>
<thead>
<tr class="header">
<th>Valor<sub>Sub</sub></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>-294.50</td>
</tr>
<tr class="even">
<td>-91.50</td>
</tr>
<tr class="odd">
<td>-793.50</td>
</tr>
<tr class="even">
<td>-97.90</td>
</tr>
<tr class="odd">
<td>-597.30</td>
</tr>
<tr class="even">
<td>-198.50</td>
</tr>
<tr class="odd">
<td>-495.50</td>
</tr>
</tbody>
</table>
<ul>
<li><p>Multiplicação</p>
<div class="sourceCode" id="cb25" data-engine="mysql"
data-dbhost="127.0.0.1" data-dbport="3306" data-dbuser="vini"
data-dbpassword="macro187" data-database="super"><pre
class="sourceCode sql"><code class="sourceCode sql"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> (valorVendaProduto<span class="op">*</span>quantidadeProduto) <span class="kw">AS</span> Valor_Total <span class="kw">FROM</span> Produtos         </span></code></pre></div></li>
</ul>
<table>
<thead>
<tr class="header">
<th>Valor<sub>Total</sub></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1650.00</td>
</tr>
<tr class="even">
<td>850.00</td>
</tr>
<tr class="odd">
<td>5200.00</td>
</tr>
<tr class="even">
<td>210.00</td>
</tr>
<tr class="odd">
<td>1620.00</td>
</tr>
<tr class="even">
<td>300.00</td>
</tr>
<tr class="odd">
<td>2250.00</td>
</tr>
</tbody>
</table>
<ul>
<li><p>Divisão</p>
<div class="sourceCode" id="cb26" data-engine="mysql"
data-dbhost="127.0.0.1" data-dbport="3306" data-dbuser="vini"
data-dbpassword="macro187" data-database="super"><pre
class="sourceCode sql"><code class="sourceCode sql"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> (valorVendaProduto<span class="op">/</span>quantidadeProduto) <span class="kw">AS</span> Valor_divisão <span class="kw">FROM</span> Produtos           </span></code></pre></div></li>
</ul>
<table>
<thead>
<tr class="header">
<th>Valor<sub>divisão</sub></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>0.018333</td>
</tr>
<tr class="even">
<td>0.085000</td>
</tr>
<tr class="odd">
<td>0.008125</td>
</tr>
<tr class="even">
<td>0.021000</td>
</tr>
<tr class="odd">
<td>0.004500</td>
</tr>
<tr class="even">
<td>0.007500</td>
</tr>
<tr class="odd">
<td>0.009000</td>
</tr>
</tbody>
</table></li>
</ul>
<h2 id="ordenação-de-resultados-com-o-order-by">Ordenação de resultados
com o ORDER BY</h2>
<ul>
<li>o comando <strong>ORDER BY</strong> ordena o resultado da busca
através de quaiquer campos presentes na consulta, seja no resultado ou
nas tabelas consultadas, embora o mais comum seja ordenar por algum
campo que selecionamos. Esse comando pode ser atribuido a qualquer campo
existente e funcionará listando do menor para o maior (por padrão). Ele
sobrescreve o comportamento padrão de listar os registros por ordem de
criação.
<ul>
<li>Pode ser utilizado em <strong>tipos textuais</strong> ordenando por
<strong>ordem alfabética</strong></li>
<li>Pode ser utilizado em <strong>tipos DATE/TIME/DATETIME</strong>
ordenando do mais velho ao mais recente</li>
<li>Pode ser utilizado em campos criados durante o processo de consulta
pois atua <strong>APÓS</strong> o termino da consulta</li>
<li>Possui os parametros <strong>ASC</strong> (padrão) e
<strong>DESC</strong>
<ul>
<li>ASC: comportamento padrão, ascenedente, do menor para o maior</li>
<li>DESC: decrescente, do maior para o menor</li>
</ul></li>
</ul>
<ul>
<li><p>Exemplo:</p>
<div class="sourceCode" id="cb27" data-engine="mysql"
data-dbhost="127.0.0.1" data-dbport="3306" data-dbuser="vini"
data-dbpassword="macro187" data-database="super"><pre
class="sourceCode sql"><code class="sourceCode sql"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> nomeProduto, categoriaProduto, valorVendaProduto <span class="kw">FROM</span> Produtos <span class="kw">ORDER</span> <span class="kw">BY</span> nomeProduto </span></code></pre></div>
<div class="sourceCode" id="cb28" data-engine="mysql"
data-dbhost="127.0.0.1" data-dbport="3306" data-dbuser="vini"
data-dbpassword="macro187" data-database="super"><pre
class="sourceCode sql"><code class="sourceCode sql"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> nomeProduto, categoriaProduto, valorVendaProduto <span class="kw">FROM</span> Produtos <span class="kw">ORDER</span> <span class="kw">BY</span> nomeProduto <span class="kw">DESC</span></span></code></pre></div></li>
<li><p>Também pode concatenar mais de um campo na ordenação, começando
pelo primeiro e depois reordenando através do segundo (sem sobrescrever
o primeiro)</p>
<ul>
<li><p>Exemplo</p>
<div class="sourceCode" id="cb29" data-engine="mysql"
data-dbhost="127.0.0.1" data-dbport="3306" data-dbuser="vini"
data-dbpassword="macro187" data-database="super"><pre
class="sourceCode sql"><code class="sourceCode sql"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> nomeProduto, categoriaProduto, valorVendaProduto <span class="kw">FROM</span> Produtos <span class="kw">ORDER</span> <span class="kw">BY</span> categoriaProduto, nomeProduto <span class="kw">DESC</span> </span></code></pre></div></li>
</ul></li>
</ul></li>
</ul>
<h2 id="funções-internas-básicas-count-sum-avg-min-max">Funções internas
básicas (COUNT, SUM, AVG, MIN, MAX)</h2>
<ul>
<li>Até o momento as operações citadas conultam dados. Mesmo em <span
class="spurious-link" target="Operadores aritiméticos"><em>Operadores
aritiméticos</em></span> os resultados são apenas apenas listagens. No
entatnto nem sempre a necessidade é de listar dados. Para isso existem
as <strong>funções de agregação</strong></li>
</ul>
<h3 id="funções-de-agregação">Funções de agregação</h3>
<ol>
<li><p>COUNT()</p>
<ul>
<li><p>Pode ser utilizado em:</p>
<ul>
<li><strong>TODOS OS TIPOS DE DADOS</strong> basta obedecer o tipo na
condicional <strong>WHERE</strong></li>
</ul></li>
<li><p>Função que retorna o numero de linhas que correspondem a um
determinado critério.</p></li>
<li><p>Exemplo: Numeros de registros que contem a palavra "Leite"</p>
<div class="sourceCode" id="cb30" data-engine="mysql"
data-dbhost="127.0.0.1" data-dbport="3306" data-dbuser="vini"
data-dbpassword="macro187" data-database="super"><pre
class="sourceCode sql"><code class="sourceCode sql"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> <span class="fu">COUNT</span>(nomeProduto) <span class="kw">AS</span> ProtudosComLeite <span class="kw">FROM</span> Produtos <span class="kw">WHERE</span> nomeProduto <span class="kw">LIKE</span> <span class="st">&#39;%leite%&#39;</span>    </span></code></pre></div>
<table>
<thead>
<tr class="header">
<th>ProtudosComLeite</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>2</td>
</tr>
</tbody>
</table></li>
</ul></li>
<li><p>AVG()</p>
<ul>
<li>Pode ser utilizado em:</li>
<li><strong>NUMERICOS</strong></li>
<li>Retorna o valor médio de uma coluna.</li>
<li>Exemplo: valor médio dos produtos</li>
</ul>
<div class="sourceCode" id="cb31" data-engine="mysql"
data-dbhost="127.0.0.1" data-dbport="3306" data-dbuser="vini"
data-dbpassword="macro187" data-database="super"><pre
class="sourceCode sql"><code class="sourceCode sql"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> <span class="fu">AVG</span>(valorVendaProduto) <span class="kw">AS</span> ValorMedio <span class="kw">FROM</span> Produtos        </span></code></pre></div>
<table>
<thead>
<tr class="header">
<th>ValorMedio</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>4.471429</td>
</tr>
</tbody>
</table>
<ul>
<li><p>Perceba que também é possivel usar o condicional
<strong>WHERE</strong> para filtrar quais produtos devem participar de
média. Imagine que precisamos da média de valores dos produtos da
categoria "Mercearia".</p>
<div class="sourceCode" id="cb32" data-engine="mysql"
data-dbhost="127.0.0.1" data-dbport="3306" data-dbuser="vini"
data-dbpassword="macro187" data-database="super"><pre
class="sourceCode sql"><code class="sourceCode sql"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> <span class="fu">AVG</span>(valorVendaProduto) <span class="kw">AS</span> ValorMedioMercearia <span class="kw">FROM</span> Produtos <span class="kw">WHERE</span> categoriaProduto <span class="op">=</span> <span class="st">&#39;Mercearia&#39;</span>          </span></code></pre></div></li>
</ul>
<table>
<thead>
<tr class="header">
<th>ValorMedioMercearia</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>6.500000</td>
</tr>
</tbody>
</table></li>
<li><p>SUM()</p>
<ul>
<li>Pode ser utilizado em:
<ul>
<li><strong>NUMERICOS</strong></li>
</ul>
<ul>
<li>Retorna a soma de uma determinada coluna</li>
<li>Exemplo: Qual a quantidade total de produtos?</li>
</ul></li>
</ul>
<div class="sourceCode" id="cb33" data-engine="mysql"
data-dbhost="127.0.0.1" data-dbport="3306" data-dbuser="vini"
data-dbpassword="macro187" data-database="super"><pre
class="sourceCode sql"><code class="sourceCode sql"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> <span class="fu">SUM</span>(quantidadeProduto) <span class="kw">AS</span> TotalProdutos <span class="kw">FROM</span> Produtos</span></code></pre></div>
<table>
<thead>
<tr class="header">
<th>TotalProdutos</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>2600</td>
</tr>
</tbody>
</table>
<ul>
<li>Também é possível utilizar a condicional <strong>WHERE</strong> para
filtrar a soma</li>
</ul>
<div class="sourceCode" id="cb34" data-engine="mysql"
data-dbhost="127.0.0.1" data-dbport="3306" data-dbuser="vini"
data-dbpassword="macro187" data-database="super"><pre
class="sourceCode sql"><code class="sourceCode sql"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> <span class="fu">SUM</span>(quantidadeProduto) <span class="kw">AS</span> TotalProdutos <span class="kw">FROM</span> Produtos <span class="kw">WHERE</span> categoriaProduto <span class="op">=</span> <span class="st">&#39;Mercearia&#39;</span></span></code></pre></div>
<table>
<thead>
<tr class="header">
<th>TotalProdutos</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1400</td>
</tr>
</tbody>
</table></li>
<li><p>MIN()</p>
<ul>
<li><p>Pode ser utilizado em:</p>
<ul>
<li><strong>Alphanuméricos/Numéricos/DATE/TIME</strong></li>
</ul></li>
<li><p>Retorna o menor valor de uma coluna</p></li>
<li><p>Exemplo: menor valor de produto</p>
<div class="sourceCode" id="cb35" data-engine="mysql"
data-dbhost="127.0.0.1" data-dbport="3306" data-dbuser="vini"
data-dbpassword="macro187" data-database="super"><pre
class="sourceCode sql"><code class="sourceCode sql"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> <span class="fu">MIN</span>(valorVendaProduto) <span class="kw">AS</span> MenorValor <span class="kw">FROM</span> Produtos        </span></code></pre></div>
<table>
<thead>
<tr class="header">
<th>MenorValor</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1.50</td>
</tr>
</tbody>
</table>
<ul>
<li>Quando utilizado em campos <strong>Alphanuméricos</strong> retorna o
primeiro em ordem alfabética</li>
</ul></li>
</ul></li>
<li><p>MAX()</p>
<ul>
<li><p>Retorna o maior valor de uma coluna</p>
<div class="sourceCode" id="cb36" data-engine="mysql"
data-dbhost="127.0.0.1" data-dbport="3306" data-dbuser="vini"
data-dbpassword="macro187" data-database="super"><pre
class="sourceCode sql"><code class="sourceCode sql"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> <span class="fu">MAX</span>(valorVendaProduto) <span class="kw">AS</span> MaiorValor <span class="kw">FROM</span> Produtos        </span></code></pre></div>
<ul>
<li>Quando utilizado em campos <strong>Alphanuméricos</strong> retorna o
ultimo em ordem alfabética</li>
</ul></li>
</ul></li>
</ol>
<h3 id="outras-utilizações-das-funções-agregadoras">Outras utilizações
das funções agregadoras</h3>
<blockquote>
<p>As funções agregadas têm muitos usos, além dos que foram descritos
nesta seção. Elas são particularmente úteis quando usadas com a cláusula
<strong>GROUP BY</strong>, abordada no conteúdo <a
href="20230615174326-senac_consulta_com_multiplas_tabelas.html">Consulta
com múltiplas tabelas</a>, desta unidade curricular, e com várias outras
cláusulas de consulta que afetam como os conjuntos de resultados são
classificados.</p>
</blockquote>
<h2 id="subconsultas-em-sql-subquery">Subconsultas em SQL
(<em>subquery</em>)</h2>
<ul>
<li>Uma subquery (ou subselect) é uma instrução <strong>SELECT</strong>
nestada em outra instrução <strong>SELECT</strong></li>
<li>Uma subconsulta deve ser delimitada entre parenteses e é avaliada
apenas uma vez. O resultado de uma subconsulta retorna um conjunto de
linhas para a consulta principal
<ul>
<li>Isso significa que a consulta principal <strong>DEPENDE</strong> da
<strong>subconsulta</strong></li>
</ul></li>
</ul>
<h3 id="formas-de-realizar-subconsultas">Formas de realizar
subconsultas</h3>
<ul>
<li>Subconsulta como <strong>filtro</strong> de uma consulta (utiliza
operadores de comparação e <strong>IN</strong>)</li>
<li>Subconsulta como uma nova coluna de consuta (<strong>SELECT (…) AS
Novo<sub>Campo</sub></strong>)</li>
</ul>
<h3 id="preparando-o-ambiente-1">Preparando o ambiente</h3>
<ul>
<li>Criando uma nova tabela Vendas</li>
</ul>
<div class="sourceCode" id="cb37" data-engine="mysql"
data-dbhost="127.0.0.1" data-dbport="3306" data-dbuser="vini"
data-dbpassword="macro187" data-database="super"><pre
class="sourceCode sql"><code class="sourceCode sql"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a> <span class="kw">CREATE</span> <span class="kw">TABLE</span> Vendas (</span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a>IdVenda <span class="dt">INT</span> AUTO_INCREMENT,</span>
<span id="cb37-3"><a href="#cb37-3" aria-hidden="true" tabindex="-1"></a>IdProduto <span class="dt">INT</span>,</span>
<span id="cb37-4"><a href="#cb37-4" aria-hidden="true" tabindex="-1"></a>quantidadeVendida <span class="dt">INT</span>,</span>
<span id="cb37-5"><a href="#cb37-5" aria-hidden="true" tabindex="-1"></a>valorVendido <span class="dt">DOUBLE</span>(<span class="dv">9</span>,<span class="dv">2</span>),</span>
<span id="cb37-6"><a href="#cb37-6" aria-hidden="true" tabindex="-1"></a>dataVenda <span class="dt">DATE</span>,</span>
<span id="cb37-7"><a href="#cb37-7" aria-hidden="true" tabindex="-1"></a><span class="kw">PRIMARY</span> <span class="kw">KEY</span>(IdVenda)    </span>
<span id="cb37-8"><a href="#cb37-8" aria-hidden="true" tabindex="-1"></a>    )      </span></code></pre></div>
<ul>
<li>Populando a tabela Vendas</li>
</ul>
<div class="sourceCode" id="cb38" data-engine="mysql"
data-dbhost="127.0.0.1" data-dbport="3306" data-dbuser="vini"
data-dbpassword="macro187" data-database="super"><pre
class="sourceCode sql"><code class="sourceCode sql"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a>    <span class="kw">INSERT</span> <span class="kw">INTO</span> Vendas (IdProduto,quantidadeVendida,valorVendido,dataVenda)</span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a><span class="kw">VALUES</span> (<span class="dv">2</span>,<span class="dv">10</span>,<span class="fl">8.5</span>,<span class="st">&#39;2022-12-31&#39;</span>), (<span class="dv">2</span>,<span class="dv">15</span>,<span class="fl">8.5</span>,<span class="st">&#39;2022-01-01&#39;</span>), (<span class="dv">1</span>,<span class="dv">3</span>,<span class="fl">5.50</span>,<span class="st">&#39;2022-01-15&#39;</span>);         </span></code></pre></div>
<ul>
<li>Resultado</li>
</ul>
<div class="sourceCode" id="cb39" data-engine="mysql"
data-dbhost="127.0.0.1" data-dbport="3306" data-dbuser="vini"
data-dbpassword="macro187" data-database="super"><pre
class="sourceCode sql"><code class="sourceCode sql"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> <span class="op">*</span> <span class="kw">FROM</span> Vendas          </span></code></pre></div>
<table>
<thead>
<tr class="header">
<th>IdVenda</th>
<th>IdProduto</th>
<th>quantidadeVendida</th>
<th>valorVendido</th>
<th>dataVenda</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>2</td>
<td>10</td>
<td>8.50</td>
<td>2022-12-31</td>
</tr>
<tr class="even">
<td>2</td>
<td>2</td>
<td>15</td>
<td>8.50</td>
<td>2022-01-01</td>
</tr>
<tr class="odd">
<td>3</td>
<td>1</td>
<td>3</td>
<td>5.50</td>
<td>2022-01-15</td>
</tr>
</tbody>
</table>
<h3 id="subconsulta-como-filtro-de-uma-consulta">Subconsulta como filtro
de uma consulta</h3>
<ul>
<li><p>Uma subconsulta de valor único retorna <strong>apenas um
valor</strong> e pode ser usada no lugar que qualquer expressão
utilizando os operadores =, &lt;, &gt;, &lt;&gt;</p></li>
<li><p>Suponha que é necessário obter da tabela Produtos todos os dados
do produto de maior valor:</p>
<div class="sourceCode" id="cb40" data-engine="mysql"
data-dbhost="127.0.0.1" data-dbport="3306" data-dbuser="vini"
data-dbpassword="macro187" data-database="super"><pre
class="sourceCode sql"><code class="sourceCode sql"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> <span class="op">*</span> <span class="kw">FROM</span> Produtos <span class="kw">WHERE</span> valorVendaProduto <span class="op">=</span> (<span class="kw">SELECT</span> <span class="fu">MAX</span>(valorVendaProduto) <span class="kw">FROM</span> Produtos)        </span></code></pre></div></li>
<li><p>Destrinchando:</p>
<ol>
<li>Expressão 1: SELECT * FROM Produtos WHERE valorVendaProduto =
<ul>
<li>Seleciona todos os dados da tabela Produtos dado uma condição
atrelada ao campo "valorVendaProduto"</li>
<li>A condição, no entanto é uma outra consulta, dessa forma a Expressão
1 depende de que a Expressão 2 seja executada antes e retorne um
valor</li>
</ul></li>
<li>Expressão 2: SELECT MAX(valorVendaProduto) FROM Produtos
<ul>
<li>Retorna o maior valor da coluna valorVendaProduto da tabela
Produtos</li>
</ul></li>
<li>Passo a passo:
<ol>
<li>Expressão 2 é executada</li>
<li>Expressão 2 retorna o valor 8.50</li>
<li>Expressão 1 é executada, substituindo a Expressão 2 pelo valor
8.50</li>
<li>Expressão 1 retorna todos os valores onde o campo
"valorMaiorProduto" é igual a 8.50</li>
</ol></li>
</ol></li>
</ul>
<ol>
<li><p>Subconsulta retornando multiplas linhas</p>
<ul>
<li>Repare que a função MAX() no exemplo acima retorna apenas um valor
possível, já que, mesmo que mais linhas possuam como valorVendaProduto o
valor máximo, o retorno da função é o número de maior valor e não as
linhas que possuem esse valor.</li>
<li>Podem haver casos onde o retorno de uma subquery abarca mais de uma
linha, para lidar com essa subquery devemos utilizar o operador lógico
<strong>IN</strong></li>
<li>Considere o seguinte exemplo a seguir para exibir o nome de todos os
produtos que foram vendidos (Utilizando a tabela Vendas criada
anteriormente).</li>
</ul>
<div class="sourceCode" id="cb41" data-engine="mysql"
data-dbhost="127.0.0.1" data-dbport="3306" data-dbuser="vini"
data-dbpassword="macro187" data-database="super"><pre
class="sourceCode sql"><code class="sourceCode sql"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> nomeProduto <span class="kw">FROM</span> Produtos <span class="kw">WHERE</span> IdProduto <span class="kw">IN</span> (<span class="kw">SELECT</span> IdProduto <span class="kw">FROM</span> Vendas) </span></code></pre></div>
<table>
<thead>
<tr class="header">
<th>nomeProduto</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Refrigerante</td>
</tr>
<tr class="even">
<td>Arroz 5kg</td>
</tr>
</tbody>
</table>
<ul>
<li>Destrinchando:
<ul>
<li>Expressão 1: SELECT nomeProduto FROM Produtos WHERE idProduto IN
<ul>
<li>Retorna todos os valores de nomeProduto da tabela Produtos WHERE
idProduto <strong>esta contida em</strong> (expressão
<strong>IN</strong>)</li>
</ul></li>
<li>Expressão 2: SELECT IdProduto FROM Vendas
<ul>
<li>Retorna os campos IdProduto de todas as linhas da tabela Vendas</li>
</ul></li>
<li>Passo a passo:
<ol>
<li>Expressão 2 Retorna todas os valores de IdProduto de todas as linhas
da tabela Vendas
<ul>
<li>O retorno se parece com (1, 2)</li>
</ul></li>
<li>Expressão 1 começa a ser executada na tabela Produtos filtrando
(<strong>WHERE</strong>) onde o campo IdProduto está contido em
(1,2)</li>
</ol>
<ul>
<li>Como se parece passo a passo:
<ol>
<li>(SELECT IdProduto FROM Vendas) = (1,2)</li>
<li>SELECT nomeProduto FROM Produtos WHERE IdProduto IN (1,2)</li>
</ol></li>
</ul></li>
</ul></li>
</ul></li>
</ol>
<h3 id="subconsulta-como-uma-nova-coluna-da-consulta">Subconsulta como
uma nova coluna da consulta</h3>
<ul>
<li><p>Uma das formas mais simples de realizar uma subconsulta.</p></li>
<li><p>Imagine que devem ser listados os nomes e total vendido de
produtos, realizando uma consulta na tabela de produtos e uma
subconsulta na tabela de vendas</p>
<div class="sourceCode" id="cb42" data-engine="mysql"
data-dbhost="127.0.0.1" data-dbport="3306" data-dbuser="vini"
data-dbpassword="macro187" data-database="super"><pre
class="sourceCode sql"><code class="sourceCode sql"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> P.nomeProduto,(<span class="kw">SELECT</span> <span class="fu">SUM</span>(V.quantidadeVendida<span class="op">*</span>V.valorVendido) <span class="kw">FROM</span> Vendas <span class="kw">AS</span> V <span class="kw">WHERE</span> V.idProduto <span class="op">=</span> P.idProduto) <span class="kw">AS</span> Total_vendido <span class="kw">FROM</span> Produtos <span class="kw">AS</span> P  </span></code></pre></div></li>
<li><p>Destrinchando:</p>
<ul>
<li>Seleciona as tabelas consultadas: Produtos e Vendas</li>
<li>Atribui P a tabela Produtos e V a tabela Vendas</li>
<li>Subquery é executada: Seleciona o a soma de
quantidadeVendida*valorVendido da tabela V onde o valor de V.idProduto é
igual ao valor de P.idProduto</li>
<li>Atribui o resultado das somas ao campo Total<sub>vendido</sub></li>
<li>Seleciona o nome de todos os produtos atribuindo a cada um o novo
valor Total<sub>vendido</sub></li>
</ul></li>
</ul>
<h1 id="conceitos-imporantes">Conceitos imporantes</h1>
<ul>
<li>Consultas</li>
<li>Condições para consultas</li>
<li>Operadores aritiméticos em consultas</li>
<li>Funções agregadoras</li>
<li>Subconsultas e concatenação de expressões</li>
</ul>
</body>
</html>
